---

title: An nbdev-org-babel example

keywords: fastai
sidebar: home_sidebar

summary: "Literate Programming using nbdev, org-babel and emacs-jupyter"
description: "Literate Programming using nbdev, org-babel and emacs-jupyter"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="An-nbdev-org-babel-example">An nbdev-org-babel example<a class="anchor-link" href="#An-nbdev-org-babel-example"> </a></h1><blockquote><p>Literate Programming using nbdev, org-babel and emacs-jupyter</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installation">Installation<a class="anchor-link" href="#Installation"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>See <a href="https://methuselah-0.github.io/nbdev-org-babel-example//">this link</a> for the jekyll website documentation generated using
<code>nbdev_build_docs_from_org</code>.</p>
<p>There are currently (as of 2020-05-29) many unmentioned dependencies
in nbdev-org-babel, such as ox-ipynb, xq, moreutils (sponge) and
various emacs libraries. Checkout the bash script in the source code
in nbdev-org-babel, to figure those out if you are missing some. I
hope nbdev-org-babel gets rewritten in python and merged to fastai's
nbdev master in some distant future.</p>
<p>Install procedure(assuming you have dependencies installed):</p>
<p><code>git clone https://github.com/methuselah-0/nbdev-org-babel.git</code></p>
<p><code>cd to nbdev-org-babel</code></p>
<p><code>pip install -e .</code></p>
<p><code>cd ~/src</code></p>
<p><code>nbdev_new my_new_project</code></p>
<p><code>cd my_new_project</code></p>
<p>Edit the settings.ini file as you normally would with any nbdev project.</p>
<p>However, make sure that the following two settings correspond to the github repo name isntead of the defaults:</p>
<p><code>doc_baseurl = /nbdev-org-babel-example/</code></p>
<p><code>git_url = https://github.com/%(user)s/nbdev-org-babel-example/tree/%(branch)s/</code></p>
<p>create an index.org file in your <code>nbs_path</code> directory.</p>
<p>create a directory inside the <code>nbs_path</code> directory with the same name as <code>lib_name</code> (as defined in settings.ini)</p>
<p>create your literate program in <code>/path/to/repo_name/nbs_path/lib_name/my_project.org</code></p>
<p>create index.org in <code>/path/to/repo_name/nbs_path/</code>.</p>
<p>Run <code>nbdev_install_git_hooks</code>.</p>
<p>Finally, run <code>nbdev_build_docs_from_org</code> which will create the needed
library and documentation for your project.</p>
<p>Note that if you don't want to run the whole procedure from org-files,
to ipynb files to building the docs, you can do for example
<code>nbdev_build_docs --force_all '*'</code> to just rebuild the html docs from
current ipynb files.</p>
<p>To see the results of the <code>.github/workflows/main.yml</code> CI-definition;
<code>Click Actions -&gt; Click some commit-message -&gt; Click Build in the left
pane -&gt; Click the 3 dots in the upper right corner -&gt; view raw logs</code></p>
<p>If you are using some dependency packages, make sure to add those in
<code>settings.ini</code> under requirements, e.g. <code>requirements = scipy&gt;=1.4.1
numpy&gt;=1.18.4 matplotlib&gt;=3.2.1</code>.</p>
<p>Also, see <a href="https://nbdev.fast.ai/tutorial/#Set-up-console-scripts">how to setup console scripts</a>, and <a href="https://nbdev.fast.ai/tutorial/#Upload-to-pypi">how to upload your project
to pypi</a>. However, you might find 2 problems out-of-the-box when
running <code>make release</code>. In the Makefile from the nbdev template
project, you may need to change <code>python setup.py sdist bdist_wheel</code>
to <code>python3 set...</code>. Secondly, you may need to install the wheel
and twine packages: <code>pip install wheel twine</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Emacs-Python-Setup-Suggestions">Emacs Python Setup Suggestions<a class="anchor-link" href="#Emacs-Python-Setup-Suggestions"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>List of stuff that is useful for Python LP-programming in emacs:</p>
<ul>
<li>repl: interactively exploring and testing code (emacs-jupyter)</li>
<li>version control (git)</li>
<li>automatic check for the code's adherence to best practices and
syntax highlighting (flycheck-pycheckers)</li>
<li>debugging, debugger (real-gud)</li>
<li>code definition lookup (emacs-jupyter, ag)</li>
<li>docs-generation (org-babel, nbdev, pandoc)</li>
<li>code generation &amp; completion (yasnippet, jedi)</li>
</ul>

</div>
</div>
</div>
</div>
 

